<!DOCTYPE html>
<!--[if IE 9 ]><html class="ie9"><![endif]-->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
        <meta name="format-detection" content="telephone=no">
        <meta charset="UTF-8">

        <title>Social Conflict in Africa</title>
            
        <!-- CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/calendar.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">
		<style>

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.x.axis path {
  display: none;
}

.line {
  fill: none;
  stroke: steelblue;
  stroke-width: 1.5px;
}

</style>
		<script src="http://d3js.org/d3.v3.min.js"></script>
    </head>
    <body id="skin-blur-violate">

        <header id="header" class="media">
            <a class="logo pull-left" href="index.html"><img src="img/logo/logo_2_1.png" style="height:100px;width:290px;"/></a>
            <div class="media-body">
                <div class="media" id="top-menu">
                    <div id="time" class="pull-right">
                        <span id="hours"></span>:
                        <span id="min"></span>:
                        <span id="sec"></span>
                    </div>
                    <div class="media-body"><h1 style="margin-top:25px!important;">Social Conflict in Africa</h1></div>
                </div>
            </div>
        </header>
        
        <div class="clearfix"></div>
        
        <section id="main" class="p-relative" role="main">
       
            <!-- Content -->
            <section id="content" class="container">
				<!-- Timeline -->
                <div class="block-area shortcut-area">
                    &nbsp;
                </div>
                
                <hr class="whiter" />
                
                <!-- Quick Stats -->
                <div class="block-area">
                    <div class="row">
                        <div class="col-md-3 col-xs-6">
                            <div class="tile quick-stats">
                                <!--<div id="stats-line-2" class="pull-left"></div>-->
                                <div class="data">
                                    <h2 data-value="29356">0</h2>
                                    <small>Total Conflicts</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3 col-xs-6">
                            <div class="tile quick-stats media">
                                <!--<div id="stats-line-3" class="pull-left"></div>-->
                                <div class="media-body">
                                    <h2 data-value="4896">0</h2>
                                    <small>Total Fatalities</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3 col-xs-6">
                            <div class="tile quick-stats media">
                                <!--<div id="stats-line-4" class="pull-left"></div>-->
                                <div class="media-body">
                                    <h2 data-value="5">0</h2>
                                    <small>Total Countries</small>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3 col-xs-6">
                            <div class="tile quick-stats media">
                                <!--<div id="stats-line" class="pull-left"></div>-->
                                <div class="media-body">
                                    <h2 data-value="98">0</h2>
                                    <small>Total Locations</small>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>

                <hr class="whiter" />
                
                <div class="block-area">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="tile">
                                <h2 class="tile-title"><i class="fa fa-bar-chart-o"></i> Conflicts across the countries</h2>
                                <div class="p-10">
                                    <div id="chart-1" class="main-chart" style="height:100%;"></div>
                                </div>  
                            </div>
                        </div>
                    </div>
					<div class="row">
                        <div class="col-md-12">
                            <div class="tile">
                                <h2 class="tile-title"><i class="fa fa-bar-chart-o"></i> Fatalities across the countries</h2>
                                <div class="p-10">
                                    <div id="chart-2" class="main-chart" style="height: 250px"></div>
                                </div>  
                            </div>
                        </div>
                    </div>
					<div class="row">
                        <div class="col-md-12">
                            <div class="tile">
                                <h2 class="tile-title"><i class="fa fa-bar-chart-o"></i> Conflicts vs Fatalities across the countries</h2>
                                <div class="p-10">
                                    <div id="chart-3" class="main-chart" style="height:100%;"></div>
                                </div>  
                            </div>
                        </div>
                    </div>
					<div class="row">
                        <div class="col-md-6">
                            <div class="tile">
                                <h2 class="tile-title"><i class="fa fa-bar-chart-o"></i> Conflicts ratio</h2>
                                <div class="p-10">
                                    <div id="chart-4" class="main-chart" style="height: 250px"></div>
                                </div>  
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="tile">
                                <h2 class="tile-title"><i class="fa fa-bar-chart-o"></i> Fatalities ratio</h2>
                                <div class="p-10">
                                    <div id="chart-5" class="main-chart" style="height: 250px"></div>
                                </div>  
                            </div>
                        </div>
                    </div>
					<div class="row">
                        <div class="col-md-12">
                            <div class="tile">
                                <h2 class="tile-title"><i class="fa fa-bar-chart-o"></i> Conflicts & Fatalities</h2>
                                <div class="p-10">
                                    <div id="chart-3" class="main-chart" style="height: 250px"></div>
                                </div>  
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </section>
        <footer style="width:99%;">
			<div class="row">
				<img src="img/logo/logo_1_1.png" style="height:100px;width:100px;float:right;margin-right:10px;"/>
			</div>
		</footer>
        <!-- Javascript Libraries -->
        <!-- jQuery -->
        <script src="js/jquery.min.js"></script> <!-- jQuery Library -->
        <script src="js/jquery-ui.min.js"></script> <!-- jQuery UI -->
        <script src="js/jquery.easing.1.3.js"></script> <!-- jQuery Easing - Requirred for Lightbox + Pie Charts-->

        <!-- Bootstrap -->
        <script src="js/bootstrap.min.js"></script>

        <!-- UX -->
        <script src="js/scroll.min.js"></script> <!-- Custom Scrollbar -->

		<!-- All JS functions -->
        <script src="js/functions.js"></script>
		<script>
		var margin = {top: 20, right: 80, bottom: 30, left: 50},
		width = 1300 - margin.left - margin.right,
		height = 500 - margin.top - margin.bottom;

		var parseDate = d3.time.format("%Y%m%d").parse;

		var x = d3.time.scale().range([0, width]);
		var y = d3.scale.linear().range([height, 0]);
		var color = d3.scale.category10();

		var xAxis = d3.svg.axis().scale(x).orient("bottom");
		var yAxis = d3.svg.axis().scale(y).orient("left");

		var line = d3.svg.line().interpolate("basis")
								.x(function(d) { return x(d.date); })
								.y(function(d) { return y(d.temperature); });

		var svg = d3.select("div#chart-1").append("svg")
										  .attr("width", width + margin.left + margin.right)
										  .attr("height", height + margin.top + margin.bottom)
										  .append("g")
										  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

		d3.tsv("data.tsv", function(error, data) {
			if (error) throw error;
			color.domain(d3.keys(data[0]).filter(function(key) { return key !== "date"; }));

			data.forEach(function(d) {
				d.date = parseDate(d.date);
		});

		var cities = color.domain().map(function(name) {
		return {
				name: name,
				values: data.map(function(d) {
					return {date: d.date, temperature: +d[name]};
				})
			};
		});

		x.domain(d3.extent(data, function(d) { return d.date; }));
		y.domain([
			d3.min(cities, function(c) { return d3.min(c.values, function(v) { return v.temperature; }); }),
			d3.max(cities, function(c) { return d3.max(c.values, function(v) { return v.temperature; }); })
		]);

		svg.append("g")
			.attr("class", "x axis")
			.attr("transform", "translate(0," + height + ")")
			.call(xAxis);

		svg.append("g")
			.attr("class", "y axis")
			.call(yAxis)
			.append("text")
			.attr("transform", "rotate(-90)")
			.attr("y", 6)
			.attr("dy", ".71em")
			.style("text-anchor", "end")
			.text("Temperature (ºF)");

		var city = svg.selectAll(".city")
						.data(cities)
						.enter().append("g")
						.attr("class", "city");

			city.append("path")
				.attr("class", "line")
				.attr("d", function(d) { return line(d.values); })
				.style("stroke", function(d) { return color(d.name); });

			city.append("text")
				.datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })
				.attr("transform", function(d) { return "translate(" + x(d.value.date) + "," + y(d.value.temperature) + ")"; })
				.attr("x", 3)
				.attr("dy", ".35em")
				.text(function(d) { return d.name; });
		});
</script>

<script>
/*
	var n = 4, // number of layers
    m = 58, // number of samples per layer
    stack = d3.layout.stack(),
    layers = stack(d3.range(n).map(function() { return bumpLayer(m, .1); })),
    yGroupMax = d3.max(layers, function(layer) { return d3.max(layer, function(d) { return d.y; }); });

var margin = {top: 40, right: 10, bottom: 20, left: 10},
    width = 1300 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var x = d3.scale.ordinal()
    .domain(d3.range(m))
    .rangeRoundBands([0, width], .08);

var y = d3.scale.linear()
    .domain([0, yGroupMax])
    .range([height, 0]);

var color = d3.scale.linear()
    .domain([0, n - 1])
    .range(["#aad", "#556"]);

var xAxis = d3.svg.axis()
    .scale(x)
    .tickSize(0)
    .tickPadding(6)
    .orient("bottom");

var svg = d3.select("div#chart-3").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
	.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var layer = svg.selectAll(".layer")
    .data(layers)
	.enter().append("g")
    .attr("class", "layer")
    .style("fill", function(d, i) { return color(i); });

var rect = layer.selectAll("rect")
    .data(function(d) { return d; })
	.enter().append("rect")
    .attr("x", function(d) { return x(d.x); })
    .attr("y", height)
    .attr("width", x.rangeBand())
    .attr("height", 0);

rect.transition()
    .delay(function(d, i) { return i * 10; })
    .attr("y", function(d) { return y(d.y0 + d.y); })
    .attr("height", function(d) { return y(d.y0) - y(d.y0 + d.y); });

svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

transitionGrouped();

function transitionGrouped() {
  y.domain([0, yGroupMax]);

  rect.transition()
      .duration(500)
      .delay(function(d, i) { return i * 10; })
      .attr("x", function(d, i, j) { return x(d.x) + x.rangeBand() / n * j; })
      .attr("width", x.rangeBand() / n)
    .transition()
      .attr("y", function(d) { return y(d.y); })
      .attr("height", function(d) { return height - y(d.y); });
}

// Inspired by Lee Byron's test data generator.
function bumpLayer(n, o) {

  function bump(a) {
    var x = 1 / (.1 + Math.random()),
        y = 2 * Math.random() - .5,
        z = 10 / (.1 + Math.random());
    for (var i = 0; i < n; i++) {
      var w = (i / n - y) * z;
      a[i] += x * Math.exp(-w * w);
    }
  }

  var a = [], i;
  for (i = 0; i < n; ++i) a[i] = o + o * Math.random();
  for (i = 0; i < 5; ++i) bump(a);
  return a.map(function(d, i) { return {x: i, y: Math.max(0, d)}; });
}
*/
</script>
</body>
</html>
